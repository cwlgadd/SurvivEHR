is_decoder: true
data:
  batch_size: 128
  unk_freq_threshold: 0.0
  min_workers: 12
  global_diagnoses: true
  repeating_events: false
  path_to_db: /rds/projects/g/gokhalkm-optimal/OPTIMAL_MASTER_DATASET/data/FoundationalModel/cprd.db
  path_to_ds: /rds/projects/g/gokhalkm-optimal/OPTIMAL_MASTER_DATASET/data/FoundationalModel/FineTune_CVD/
  meta_information_path: /rds/projects/g/gokhalkm-optimal/OPTIMAL_MASTER_DATASET/data/FoundationalModel/PreTrain/meta_information_QuantJenny.pickle
  subsample_training: 29148
experiment:
  type: fine-tune-cr
  project_name: SurvivEHR-Study1-cvd-seeded
  run_id: SurvivEHR-cr-small-v1
  fine_tune_id: cvd-fine-tune-cr-Afalse8-Ns29148-s3
  notes: Ablation on increasing cohort study size result
  tags: null
  train: true
  test: true
  verbose: true
  seed: 3
  log: true
  log_dir: /rds/projects/s/subramaa-mum-predict/CharlesGadd_Oxford/FoundationModelOutput/PreTrained/Study1_CVD/
  ckpt_dir: /rds/projects/s/subramaa-mum-predict/CharlesGadd_Oxford/FoundationModelOutput/checkpoints/
  fine_tune_outcomes:
  - IHDINCLUDINGMI_OPTIMALV2
  - ISCHAEMICSTROKE_V2
  - MINFARCTION
  - STROKEUNSPECIFIED_V2
  - STROKE_HAEMRGIC
fine_tuning:
  custom_stratification_method:
    _target_: null
    tokens: null
  head:
    surv_weight: 1
    value_weight: 0
optim:
  num_epochs: 500
  learning_rate: 0.001
  scheduler_warmup: false
  scheduler: ReduceOnPlateau
  scheduler_periods: 10000
  learning_rate_decay: 0.8
  val_check_interval: 0.125
  early_stop: true
  early_stop_patience: 10
  log_every_n_steps: 20
  limit_val_batches: 0.1
  limit_test_batches: null
  accumulate_grad_batches: 5
transformer:
  block_type: Neo
  block_size: 512
  n_layer: 6
  n_head: 6
  n_embd: 384
  layer_norm_bias: false
  attention_type: global
  bias: true
  dropout: 0.0
  attention_dropout: 0.0
  resid_dropout: 0.0
  private_heads: 0
  use_fine_tune_adapter: false
  adapter_dim: 8
head:
  SurvLayer: cr
  surv_weight: 1
  tokens_for_univariate_regression: None
  value_weight: 0.1
